import { generate_aes_key, generate_iv, aes_encrypt, aes_decrypt } from "@stdlib/crypto";

print("Step 1: Generating key and IV");
let key = generate_aes_key();
let iv = generate_iv();

print("Step 2: Encrypting");
let ciphertext = aes_encrypt("Hello", key, iv);
print("Ciphertext length: " + typeof(ciphertext.length));

print("Step 3: About to call aes_decrypt");
print("Function type: " + typeof(aes_decrypt));
print("ciphertext type: " + typeof(ciphertext));
print("key type: " + typeof(key));
print("iv type: " + typeof(iv));
try {
    print("Step 3b: Calling aes_decrypt");
    let result = aes_decrypt(ciphertext, key, iv);
    print("Step 4: Got result");
    print("Result type: " + typeof(result));
} catch (e) {
    print("ERROR: " + e);
}
