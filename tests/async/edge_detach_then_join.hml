// Test joining a detached task
// Expected: ERROR

import { sleep } from "@stdlib/time";

async fn compute(n: i32): i32 {
    return n * 2;
}

let task = spawn(compute, 21);
detach(task);

// Try to join detached task
try {
    let result = join(task);
    print("ERROR: Should not be able to join detached task");
} catch (e) {
    print("PASS: Caught join on detached task: " + e);
}

// Give detached task time to complete before program exits
sleep(0.05);
